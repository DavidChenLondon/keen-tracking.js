!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t){e.exports=function(e,t,n){var r;if(!e)return 0;if(n=n||e,e instanceof Array){for(r=0;r<e.length;r++)if(!1===t.call(n,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===t.call(n,e[r],r,e))return 0;return 1}},function(e,t){e.exports=function(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])e[n]=arguments[t][n];return e}},function(e,t,n){(function(t){console.log("browser"),function(t){var r=t.Keen||void 0,o=n(0),i=n(1),s=n(9),a=n(8),c=n(4);function u(e){if(this instanceof u==!1)return new u(e);this.configure(e),u.debug&&this.on("error",u.log),this.emit("ready"),u.emit("client",this)}function l(e){return void 0!==e}r&&void 0===r.resources&&(u.legacyVersion=r),c(u),c(u.prototype),i(u,{debug:!1,enabled:!0,loaded:!1,version:"__VERSION__"}),u.helpers=u.helpers||{},u.resources=u.resources||{},i(u.resources,{base:"{protocol}://{host}",version:"{protocol}://{host}/3.0",projects:"{protocol}://{host}/3.0/projects",projectId:"{protocol}://{host}/3.0/projects/{projectId}",events:"{protocol}://{host}/3.0/projects/{projectId}/events",queries:"{protocol}://{host}/3.0/projects/{projectId}/queries"}),u.utils=u.utils||{},i(u.utils,{each:o,extend:i,parseParams:s,serialize:a}),u.extendLibrary=function(e,t){var n=r||t;return l(n)&&l(n.resources)&&(o(n,function(t,n){"object"==typeof t?(e[n]=e[n]||{},i(e[n],t)):e[n]=e[n]||t}),i(e.prototype,n.prototype)),e},u.log=function(e){u.debug&&"object"==typeof console&&console.log("[Keen]",e)},u.noConflict=function(){return void 0!==t.Keen&&(t.Keen=u.legacyVersion||r),u},u.ready=function(e){u.loaded?e():u.once("ready",e)},u.prototype.configure=function(e){var t=e||{};return this.config=this.config||{projectId:void 0,writeKey:void 0,host:"api.keen.io",protocol:"https",requestType:"jsonp",resources:i({},u.resources)},"undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1&&(t.protocol=document.location.protocol.replace(":","")),t.host&&t.host.replace(/.*?:\/\//g,""),i(this.config,t),this},u.prototype.masterKey=function(e){return arguments.length?(this.config.masterKey=e?String(e):null,this):this.config.masterKey},u.prototype.projectId=function(e){return arguments.length?(this.config.projectId=e?String(e):null,this):this.config.projectId},u.prototype.resources=function(e){if(!arguments.length)return this.config.resources;var t=this;return"object"==typeof e&&o(e,function(e,n){t.config.resources[n]=e||null}),t},u.prototype.url=function(e){var t,n=Array.prototype.slice.call(arguments,1),r=this.config.resources.base||"{protocol}://{host}";return t=e&&"string"==typeof e?this.config.resources[e]?this.config.resources[e]:r+e:r,o(this.config,function(e,n){"object"!=typeof e&&(t=t.replace("{"+n+"}",e))}),o(n,function(e,n){"string"==typeof e?t+="/"+e:"object"==typeof e&&(t+="?",o(e,function(e,n){t+=n+"="+e+"&"}),t=t.slice(0,-1))}),t},function(e){if(u.loaded||"undefined"==typeof document)return void e();null==document.readyState&&document.addEventListener&&(document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e,!1),document.readyState="complete"},!1),document.readyState="loading");!function e(t){/in/.test(document.readyState)?setTimeout(function(){e(t)},9):t()}(e)}(function(){u.loaded=!0,u.emit("ready")}),e.exports=u}.call(this,"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{})}).call(this,n(10))},function(e,t,n){var r,o;
/*!
 * JavaScript Cookie v2.1.0
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */void 0===(o="function"==typeof(r=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}return function t(n){function r(t,o,i){var s;if(arguments.length>1){if("number"==typeof(i=e({path:"/"},r.defaults,i)).expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*i.expires),i.expires=a}try{s=JSON.stringify(o),/^[\{\[]/.test(s)&&(o=s)}catch(e){}return o=n.write?n.write(o,t):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",o,i.expires&&"; expires="+i.expires.toUTCString(),i.path&&"; path="+i.path,i.domain&&"; domain="+i.domain,i.secure?"; secure":""].join("")}t||(s={});for(var c=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,l=0;l<c.length;l++){var d=c[l].split("="),f=d[0].replace(u,decodeURIComponent),p=d.slice(1).join("=");'"'===p.charAt(0)&&(p=p.slice(1,-1));try{if(p=n.read?n.read(p,f):n(p,f)||p.replace(u,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(e){}if(t===f){s=p;break}t||(s[f]=p)}catch(e){}}return s}return r.get=r.set=r,r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}(function(){})})?r.call(t,n,t,e):r)||(e.exports=o)},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<r.length;o++)if((n=r[o])===t||n.fn===t){r.splice(o,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,o=(n=n.slice(0)).length;r<o;++r)n[r].apply(this,t);return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e){e.exports={name:"keen-tracking",version:"1.4.2",description:"Data Collection SDK for Keen IO",main:"dist/node/keen-tracking.js",browser:"dist/keen-tracking.js",repository:{type:"git",url:"https://github.com/keen/keen-tracking.js.git"},scripts:{start:"webpack-dev-server",test:"gulp test:cli",build:"ENV=production webpack -p && ENV=production OPTIMIZE_MINIMIZE=1 webpack -p","build:node":"TARGET=node ENV=production webpack -p",profile:"webpack --profile --json > stats.json",analyze:"webpack-bundle-analyzer stats.json /dist",preversion:"npm run build && npm run test",version:"git add .",postversion:"git push && git push --tags"},bugs:"https://github.com/keen/keen-tracking.js/issues",author:"Keen IO <team@keen.io> (https://keen.io/)",contributors:["Dustin Larimer <dustin@keen.io> (https://github.com/dustinlarimer)","Eric Anderson <eric@keen.io> (https://github.com/aroc)","Joe Wegner <joe@keen.io> (http://www.wegnerdesign.com)","Alex Kleissner <alex@keen.io> (https://github.com/hex337)","Adam Kasprowicz <adam.kasprowicz@keen.io> (https://github.com/adamkasprowicz)"],license:"MIT",dependencies:{"component-emitter":"^1.2.0","js-cookie":"2.1.0","keen-core":"^0.1.3"},devDependencies:{"babel-loader":"^7.1.4","babel-plugin-transform-object-rest-spread":"^6.26.0","babel-preset-env":"^1.7.0",browserify:"^9.0.8",chai:"^2.3.0","chai-spies":"^0.6.0",del:"^1.1.1",eslint:"^4.19.1","eslint-config-airbnb":"^16.1.0","eslint-loader":"^2.0.0","eslint-plugin-import":"^2.11.0","eslint-plugin-jsx-a11y":"^6.0.3",gulp:"^3.8.11","gulp-awspublish":"0.0.23","gulp-derequire":"^2.1.0","gulp-mocha":"^2.0.1","gulp-mocha-phantomjs":"^0.6.1","gulp-remove-empty-lines":"0.0.2","gulp-rename":"^1.2.2","gulp-replace":"^0.5.3","gulp-sourcemaps":"^1.5.2","gulp-strip-comments":"^1.0.1","gulp-util":"^3.0.4","gulp-yuicompressor":"0.0.3","html-loader":"^0.5.5","html-webpack-plugin":"^3.2.0",karma:"^1.7.1","karma-chrome-launcher":"^0.1.12","karma-firefox-launcher":"^0.1.6","karma-mocha":"^0.2.0","karma-nyan-reporter":"0.0.60","karma-requirejs":"^0.2.2","karma-safari-launcher":"^0.1.1","karma-sauce-launcher":"^0.2.11",mocha:"^2.2.5",moment:"^2.10.3",phantomjs:"^1.9.7-15",proclaim:"^3.3.0",requirejs:"^2.3.5",webpack:"^4.5.0","webpack-bundle-analyzer":"^2.11.1","webpack-cli":"^2.0.13","webpack-dev-server":"^3.1.1","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0"}}},function(e,t){e.exports={map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){"use strict";var t,n,r,o,i,s,a,c="",u=0,l=this.map;for(e=this.utf8.encode(e);u<e.length;)t=e.charCodeAt(u++),n=e.charCodeAt(u++),r=e.charCodeAt(u++),o=t>>2,i=(3&t)<<4|n>>4,s=isNaN(n)?64:(15&n)<<2|r>>6,a=isNaN(n)||isNaN(r)?64:63&r,c=c+l.charAt(o)+l.charAt(i)+l.charAt(s)+l.charAt(a);return c},decode:function(e){"use strict";var t,n,r,o,i,s,a="",c=0,u=this.map,l=String.fromCharCode;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)t=u.indexOf(e.charAt(c++)),i=(15&(n=u.indexOf(e.charAt(c++))))<<4|(r=u.indexOf(e.charAt(c++)))>>2,s=(3&r)<<6|(o=u.indexOf(e.charAt(c++))),a=a+(l(t<<2|n>>4)+(64!=r?l(i):""))+(64!=o?l(s):"");return this.utf8.decode(a)},utf8:{encode:function(e){"use strict";for(var t,n="",r=0,o=String.fromCharCode;r<e.length;)n+=(t=e.charCodeAt(r++))<128?o(t):t>127&&t<2048?o(t>>6|192)+o(63&t|128):o(t>>12|224)+o(t>>6&63|128)+o(63&t|128);return n},decode:function(e){"use strict";for(var t,n="",r=0,o=String.fromCharCode;r<e.length;)n+=(t=e.charCodeAt(r))<128?[o(t),r++][0]:t>191&&t<224?[o((31&t)<<6|63&e.charCodeAt(r+1)),r+=2][0]:[o((15&t)<<12|(63&e.charCodeAt(r+1))<<6|63&(c3=e.charCodeAt(r+2))),r+=3][0];return n}}}},function(e,t,n){"use strict";n.r(t);var r=n(2),o=n.n(r),i=n(0),s=n.n(i),a=n(1),c=n.n(a),u=n(4);function l(){return this instanceof l==!1?new l:(this.capacity=0,this.config={capacity:5e3,interval:15},this.events={},this.interval=0,this.timer=null,this)}n.n(u)()(l.prototype),l.prototype.check=function(){return function(e){if(e.capacity>0&&e.interval>=e.config.interval)return!0;if(e.capacity>=e.config.capacity)return!0;return!1}(this)&&this.flush(),0!==this.config.interval&&0!==this.capacity||this.pause(),this},l.prototype.flush=function(){return this.emit("flush"),this.interval=0,this},l.prototype.pause=function(){return this.timer&&(clearInterval(this.timer),this.timer=null),this},l.prototype.start=function(){var e=this;return e.pause(),e.timer=setInterval(function(){e.interval++,e.check()},1e3),e},o.a.helpers=o.a.helpers||{},o.a.on("client",function(e){e.extensions={events:[],collections:{}},e.queue=l(),e.queue.on("flush",function(){e.recordDeferredEvents()})}),o.a.prototype.writeKey=function(e){return arguments.length?(this.config.writeKey=e?String(e):null,this):this.config.writeKey},o.a.prototype.setGlobalProperties=function(e){if(o.a.log("This method has been deprecated. Check out #extendEvents: https://github.com/keen/keen-tracking.js#extend-events"),e&&"function"==typeof e)return this.config.globalProperties=e,this;this.emit("error","Invalid value for global properties: "+e)};var d=o.a;var f=n(6),p=n.n(f);const h=function(e){for(var t=1;t<arguments.length;t++)if(e instanceof Array&&arguments[t]instanceof Array)for(var n=0;n<arguments[t].length;n++)e.indexOf(arguments[t][n])<0&&e.push(arguments[t][n]);else for(var r in arguments[t])void 0!==e[r]&&"object"==typeof arguments[t][r]&&null!==arguments[t][r]?h(e[r],m(arguments[t][r])):void 0!==arguments[t][r]&&"function"!=typeof arguments[t][r]&&(e[r]=m(arguments[t][r]));return e};function m(e){return JSON.parse(JSON.stringify(e))}function g(e){var t="Event(s) not extended: "+e;this.emit("error",t)}function v(e,t){return t&&t.length>0&&s()(t,function(t,n){var r="function"==typeof t?t():t;h(e,r)}),e}function y(e,t,n,r){var o,i,s,a,u,l,f;if(o=this.url("events",encodeURIComponent(e)),i={},s=n,f="boolean"!=typeof r||r,b.call(this,s)){if(e&&"string"==typeof e){if(this.config.globalProperties&&(i=this.config.globalProperties(e)),c()(i,t),v(l={},this.extensions.events),v(l,this.extensions.collections[e]),v(l,[i]),this.emit("recordEvent",e,l),!d.enabled)return x.call(this,"Keen.enabled is set to false.",s),!1;if(u=(a=this.url("events",encodeURIComponent(e),{api_key:this.writeKey(),data:encodeURIComponent(p.a.encode(JSON.stringify(l))),modified:(new Date).getTime()})).length<function(){if("undefined"!=typeof window&&navigator&&(-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0))return 2e3;return 16e3}(),f)switch(this.config.requestType){case"xhr":E.call(this,"POST",o,l,s);break;case"beacon":u?function(e,t){var n=this,r=t,o=document.createElement("img");t=null,o.onload=function(){if(!0,"naturalHeight"in this){if(this.naturalHeight+this.naturalWidth===0)return void this.onerror()}else if(this.width+this.height===0)return void this.onerror();r&&r.call(n)},o.onerror=function(){!0,r&&r.call(n,"An error occurred!",null)},o.src=e+"&c=clv1"}.call(this,a,s):k.call(this,o,l,"Beacon URL length exceeds current browser limit, and XHR is not supported.",s);break;default:u?function(e,t){var n=this,r=t,o=(new Date).getTime(),i=document.createElement("script"),s=document.getElementsByTagName("head")[0],a="keenJSONPCallback",c=!1;t=null,a+=o;for(;a in window;)a+="a";function u(){r&&r.call(n,"An error occurred!",null)}function l(){window[a]=void 0;try{delete window[a]}catch(e){}s.removeChild(i)}window[a]=function(e){!0!==c&&(c=!0,r&&r.call(n,null,e),l())},i.src=e+"&jsonp="+a,s.appendChild(i),i.onreadystatechange=function(){!1===c&&"loaded"===this.readyState&&(c=!0,u(),l())},i.onerror=function(){!1===c&&(c=!0,u(),l())}}.call(this,a,s):k.call(this,o,l,"JSONp URL length exceeds current browser limit, and XHR is not supported.",s)}else u&&function(e){var t=_();t&&(t.open("GET",e,!1),t.send(null))}(a);return n=s=null,this}x.call(this,"Collection name must be a string.",s)}}function w(e,t){var n,r,o,i=this;if(n=this.url("events"),r=t,t=null,b.call(this,r))if("object"!=typeof e||e instanceof Array)x.call(this,"First argument must be an object",r);else{if(!(arguments.length>2))return this.config.globalProperties&&s()(e,function(t,n){s()(t,function(t,r){var o=i.config.globalProperties(n);e[n][r]=c()(o,t)})}),o={},s()(e,function(e,t){o[t]=o[t]||[],s()(e,function(e,n){var r={};v(r,i.extensions.events),v(r,i.extensions.collections[t]),v(r,[e]),o[t].push(r)})}),this.emit("recordEvents",o),d.enabled?(_()&&E.call(this,"POST",n,o,r),t=r=null,this):(x.call(this,"Keen.enabled is set to false.",r),!1);x.call(this,"Incorrect arguments provided to #recordEvents method",r)}}function b(e){var t=e;return e=null,this.projectId()?!!this.writeKey()||(x.call(this,"Keen.Client is missing a writeKey property.",t),!1):(x.call(this,"Keen.Client is missing a projectId property.",t),!1)}function x(e,t){var n="Event(s) not recorded: "+e;this.emit("error",n),t&&(t.call(this,n,null),t=null)}function k(e,t,n,r){_()?E.call(this,"POST",e,t,r):x.call(this,n)}function E(e,t,n,r){var o,i=this,s=_(),a=r;r=null,s.onreadystatechange=function(){var e;if(4==s.readyState)if(s.status>=200&&s.status<300){try{e=JSON.parse(s.responseText)}catch(e){d.emit("error","Could not parse HTTP response: "+s.responseText),a&&a.call(i,s,null)}a&&e&&a.call(i,null,e)}else d.emit("error","HTTP request failed."),a&&a.call(i,s,null)},s.open(e,t,!0),s.setRequestHeader("Authorization",i.writeKey()),s.setRequestHeader("Content-Type","application/json"),n&&(o=JSON.stringify(n)),"GET"===e.toUpperCase()&&s.send(),"POST"===e.toUpperCase()&&s.send(o)}function _(){var e="undefined"==typeof window?this:window;if(e.XMLHttpRequest&&("file:"!=e.location.protocol||!e.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1}function j(e){var t="Event(s) not deferred: "+e;this.emit("error",t)}var N=n(5);function A(){var e,t;if("undefined"==typeof window||!window.screen)return{};e=["height","width","colorDepth","pixelDepth","availHeight","availWidth"],t={};for(var n=0;n<e.length;n++)t[e[n]]=window.screen[e[n]]?window.screen[e[n]]:null;return t.orientation={angle:window.screen.orientation?window.screen.orientation.angle:0,type:window.innerWidth>window.innerHeight?"landscape":"portrait"},t}function S(){var e,t,n;return"undefined"==typeof document?{}:(e=document.body,t=document.documentElement,n={height:"innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,width:"innerWidth"in window?window.innerWidth:document.documentElement.offsetWidth,scrollHeight:Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)||null},window.screen&&(n.ratio={height:window.screen.availHeight?parseFloat((window.innerHeight/window.screen.availHeight).toFixed(2)):null,width:window.screen.availWidth?parseFloat((window.innerWidth/window.screen.availWidth).toFixed(2)):null}),n)}function C(e){if(!e.nodeName)return"";for(var t=[];null!=e.parentNode;){for(var n=0,r=0,o=0;o<e.parentNode.childNodes.length;o++){var i=e.parentNode.childNodes[o];i.nodeName==e.nodeName&&(i===e&&(r=n),n++)}e.hasAttribute("id")&&""!=e.id?t.unshift(e.nodeName.toLowerCase()+"#"+e.id):n>1?t.unshift(e.nodeName.toLowerCase()+":eq("+r+")"):t.unshift(e.nodeName.toLowerCase()),e=e.parentNode}return t.slice(1).join(" > ")}function O(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)||null}var T=n(3),I=n.n(T);const q=function(e){if(arguments.length)return this instanceof q==!1?new q(e):(this.config={key:e,options:{expires:365}},this.data=this.get(),this)};q.prototype.get=function(e){var t={};return I.a.get(this.config.key)&&(t=I.a.getJSON(this.config.key)),e&&"object"==typeof t&&null!==typeof t?void 0!==t[e]?t[e]:null:t},q.prototype.set=function(e,t,n){return arguments.length&&this.enabled()?("string"==typeof e&&arguments.length>=2?this.data[e]=t||null:"object"==typeof e&&1===arguments.length&&c()(this.data,e),I.a.set(this.config.key,this.data,c()(this.config.options,n||{})),this):this},q.prototype.expire=function(e){return e?I.a.set(this.config.key,this.data,c()(this.config.options,{expires:e})):(I.a.remove(this.config.key),this.data={}),this},q.prototype.options=function(e){return arguments.length?(this.config.options="object"==typeof e?e:{},this):this.config.options},q.prototype.enabled=function(){return navigator.cookieEnabled};var D=/^(?:submit|button|image|reset|file)$/i,L=/^(?:input|select|textarea|keygen)/i,H=/(\[[^\[\]]*\])/g;function P(e,t,n){if(t.match(H)){!function e(t,n,r){if(0===n.length)return t=r;var o=n.shift(),i=o.match(/^\[(.+?)\]$/);if("[]"===o)return t=t||[],Array.isArray(t)?t.push(e(null,n,r)):(t._values=t._values||[],t._values.push(e(null,n,r))),t;if(i){var s=i[1],a=+s;isNaN(a)?(t=t||{})[s]=e(t[s],n,r):(t=t||[])[a]=e(t[a],n,r)}else t[o]=e(t[o],n,r);return t}(e,function(e){var t=[],n=new RegExp(H),r=/^([^\[\]]*)/.exec(e);for(r[1]&&t.push(r[1]);null!==(r=n.exec(e));)t.push(r[1]);return t}(t),n)}else{var r=e[t];r?(Array.isArray(r)||(e[t]=[r]),e[t].push(n)):e[t]=n}return e}function M(e,t,n){return n=n.replace(/(\r)?\n/g,"\r\n"),n=(n=encodeURIComponent(n)).replace(/%20/g,"+"),e+(e?"&":"")+encodeURIComponent(t)+"="+n}function K(e){return this instanceof K==!1?new K(e):(this.count=e||0,this)}K.prototype.start=function(){var e=this;return this.pause(),this.interval=setInterval(function(){e.count++},1e3),this},K.prototype.pause=function(){return clearInterval(this.interval),this},K.prototype.value=function(){return this.count},K.prototype.clear=function(){return this.count=0,this},n.d(t,"Keen",function(){return J}),c()(d.prototype,{recordEvent:y,recordEvents:w,addEvent:function(){this.emit("error","This method has been deprecated. Check out #recordEvent: https://github.com/keen/keen-tracking.js#record-a-single-event"),y.apply(this,arguments)},addEvents:function(){this.emit("error","This method has been deprecated. Check out #recordEvents: https://github.com/keen/keen-tracking.js#record-multiple-events"),w.apply(this,arguments)}}),c()(d.prototype,{deferEvent:function(e,t){if(2===arguments.length&&"string"==typeof e)return this.queue.events[e]=this.queue.events[e]||[],this.queue.events[e].push(t),this.queue.capacity++,this.queue.timer||this.queue.start(),this.emit("deferEvent",e,t),this;j.call(this,"Incorrect arguments provided to #deferEvent method")},deferEvents:function(e){var t=this;if(1===arguments.length&&"object"==typeof e)return s()(e,function(e,n){t.queue.events[n]=t.queue.events[n]||[],t.queue.events[n]=t.queue.events[n].concat(e),t.queue.capacity=t.queue.capacity+e.length,t.queue.timer||t.queue.start()}),t.emit("deferEvents",e),t;j.call(this,"Incorrect arguments provided to #deferEvents method")},queueCapacity:function(e){return arguments.length?(this.queue.config.capacity=e?Number(e):0,this.queue.check(),this):this.queue.config.capacity},queueInterval:function(e){return arguments.length?(this.queue.config.interval=e?Number(e):0,this.queue.check(),this):this.queue.config.interval},recordDeferredEvents:function(){var e,t,n=this;return n.queue.capacity>0&&(n.queue.pause(),e=JSON.parse(JSON.stringify(n.queue.config)),t=JSON.parse(JSON.stringify(n.queue.events)),n.queue=l(),n.queue.config=e,n.queue.on("flush",function(){n.recordDeferredEvents()}),n.emit("recordDeferredEvents",t),n.recordEvents(t,function(e,r){e?n.recordEvents(t):t=void 0})),n}}),c()(d.prototype,{extendEvent:function(e,t){if(2===arguments.length&&"string"==typeof e&&("object"==typeof t||"function"==typeof t))return this.extensions.collections[e]=this.extensions.collections[e]||[],this.extensions.collections[e].push(t),this.emit("extendEvent",e,t),this;g.call(this,"Incorrect arguments provided to #extendEvent method")},extendEvents:function(e){if(1===arguments.length&&("object"==typeof e||"function"==typeof e))return this.extensions.events.push(e),this.emit("extendEvents",e),this;g.call(this,"Incorrect arguments provided to #extendEvents method")}});const F=(R=d,function(e){var t=this,n=R.helpers,r=R.utils,o=r.extend({ignoreDisabledFormFields:!1,ignoreFormFieldTypes:["password"],recordClicks:!0,recordFormSubmits:!0,recordPageViews:!0,recordScrollState:!0,shareUuidAcrossDomains:!1},e),i=new Date,s=new r.cookie("keen"),a=s.get("uuid");if(!a){a=n.getUniqueId();var c=n.getDomainName(window.location.hostname),u=c&&o.shareUuidAcrossDomains?{domain:"."+c}:{};s.set("uuid",a,u)}var l={};return o.recordScrollState&&(l=n.getScrollState(),r.listener("window").on("scroll",function(){l=n.getScrollState(l)})),t.extendEvents(function(){var e,t,r=n.getBrowserProfile();return{tracked_by:N.name+"-"+N.version,local_time_full:new Date,user:{uuid:a},page:{title:document?document.title:null,description:r.description,time_on_page:(e=i,t=(new Date).getTime()-e.getTime(),Math.round(t/1e3))},ip_address:"${keen.ip}",geo:{},user_agent:"${keen.user_agent}",tech:{profile:r},url:{full:window?window.location.href:"",info:{}},referrer:{full:document?document.referrer:"",info:{}},time:{local:{},utc:{}},keen:{timestamp:(new Date).toISOString(),addons:[{name:"keen:ip_to_geo",input:{ip:"ip_address"},output:"geo"},{name:"keen:ua_parser",input:{ua_string:"user_agent"},output:"tech"},{name:"keen:url_parser",input:{url:"url.full"},output:"url.info"},{name:"keen:url_parser",input:{url:"referrer.full"},output:"referrer.info"},{name:"keen:date_time_parser",input:{date_time:"keen.timestamp"},output:"time.utc"},{name:"keen:date_time_parser",input:{date_time:"local_time_full"},output:"time.local"}]}}}),!0===o.recordClicks&&r.listener("a, a *").on("click",function(e){var r=e.target,o={element:n.getDomNodeProfile(r),local_time_full:new Date,page:{scroll_state:l}};t.recordEvent("clicks",o)}),!0===o.recordFormSubmits&&r.listener("form").on("submit",function(e){var i=e.target,s={disabled:o.ignoreDisabledFormFields,ignoreTypes:o.ignoreFormFieldTypes},a={form:{action:i.action,fields:r.serializeForm(i,s),method:i.method},element:n.getDomNodeProfile(i),local_time_full:new Date,page:{scroll_state:l}};t.recordEvent("form_submissions",a)}),!0===o.recordPageViews&&t.recordEvent("pageviews"),t});var R;c()(d.prototype,{initAutoTracking:F}),d.prototype.trackExternalLink=function(e,t,n,r,o){this.emit("error","This method has been deprecated. Check out DOM listeners: https://github.com/keen/keen-tracking.js#listeners");var i,s=e,a=s.currentTarget?s.currentTarget:s.srcElement||s.target,c=r||500,u=!1,l="";void 0!==a.getAttribute?l=a.getAttribute("target"):a.target&&(l=a.target);"_blank"!=l&&"blank"!=l||s.metaKey||(window.open("about:blank").document.location=a.href);"A"===a.nodeName?i=function(){u||s.metaKey||"_blank"===l||"blank"===l||(u=!0,window.location=a.href)}:"FORM"===a.nodeName?i=function(){u||(u=!0,a.submit())}:this.trigger("error","#trackExternalLink method not attached to an <a> or <form> DOM element");o&&(i=function(){u||(u=!0,o())});if(this.recordEvent(t,n,i),setTimeout(i,c),!s.metaKey)return!1},c()(d.helpers,{getBrowserProfile:function(){return{cookies:void 0!==navigator.cookieEnabled&&navigator.cookieEnabled,codeName:navigator.appCodeName,description:(document&&"function"==typeof document.querySelector&&(e=document.querySelector('meta[name="description"]')),e?e.content:""),language:navigator.language,name:navigator.appName,online:navigator.onLine,platform:navigator.platform,useragent:navigator.userAgent,version:navigator.appVersion,screen:A(),window:S()};var e},getDatetimeIndex:function(e){var t=e||new Date;return{hour_of_day:t.getHours(),day_of_week:parseInt(1+t.getDay()),day_of_month:t.getDate(),month:parseInt(1+t.getMonth()),year:t.getFullYear()}},getDomainName:function(e){var t=function(e){return(e.indexOf("://")>-1?e.split("/")[2]:e.split("/")[0]).split(":")[0].split("?")[0]}(e),n=t.split("."),r=n.length;return r>2&&(t=n[r-2]+"."+n[r-1],2==n[r-2].length&&2==n[r-1].length&&(t=n[r-3]+"."+t)),t},getDomNodePath:C,getDomNodeProfile:function(e){return{action:e.action,class:e.className,href:e.href||null,id:e.id,method:e.method,name:e.name,node_name:e.nodeName,selector:C(e),text:e.text,title:e.title,type:e.type,x_position:e.offsetLeft||e.clientLeft||null,y_position:e.offsetTop||e.clientTop||null}},getScreenProfile:A,getScrollState:function(e){var t="object"==typeof e?e:{},n=c()({pixel:0,pixel_max:0,ratio:null,ratio_max:null},t);return void 0===typeof window&&void 0===typeof document||(n.pixel=(void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop)+(window.innerHeight||document.documentElement.clientHeight),n.pixel>n.pixel_max&&(n.pixel_max=n.pixel),n.ratio=parseFloat(Number(n.pixel/O()).toFixed(2)),n.ratio_max=parseFloat(Number(n.pixel_max/O()).toFixed(2))),n},getUniqueId:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},getWindowProfile:S});const U=function(e){function t(e){if(e)return this instanceof t==0?new t(e):(this.selector=e,this)}return e.domListeners=e.domListeners||{},t.prototype.on=function(t,n){var r;return 2!==arguments.length||"string"!=typeof t||"function"!=typeof n?this:(void 0===e.domListeners[t]&&(function(e,t){document.addEventListener?document.addEventListener(e,t,!1):document.attachEvent("on"+e,t)}(t,(r=t,function(t){var n,o;n=t||window.event,o=n.target||n.srcElement,"undefined"!==e.domListeners[r]&&s()(e.domListeners[r],function(e,t){!function(e,t){for(var n=(e.parentNode||document).querySelectorAll(t)||[],r=n.length;r--;)if(n[r]==e)return!0;return!1}(o,t)?"window"===t&&s()(e,function(e,t){e(n)}):s()(e,function(e,t){"click"===r&&"A"===o.nodeName?function(e,t,n){var r,o;if(void 0!==t.getAttribute?r=t.getAttribute("target"):t.target&&(r=t.target),"boolean"==typeof(o=n(e))&&!1===o||e.defaultPrevented||!1===e.returnValue)return e.preventDefault&&e.preventDefault(),e.returnValue=!1,!1;"_blank"===r||"blank"===r||e.metaKey||(e.preventDefault&&e.preventDefault(),e.returnValue=!1,t.href&&"#"!==t.href&&t.href!==window.location+"#"&&setTimeout(function(){window.location=t.href},500))}(n,o,e):"submit"===r&&"FORM"===o.nodeName?function(e,t,n){var r=n(e);if("boolean"==typeof r&&!1===r||e.defaultPrevented||!1===e.returnValue)return e.preventDefault&&e.preventDefault(),e.returnValue=!1,!1;e.preventDefault&&e.preventDefault(),e.returnValue=!1,setTimeout(function(){t.submit()},500)}(n,o,e):e(n)})})})),e.domListeners[t]={}),e.domListeners[t][this.selector]=e.domListeners[t][this.selector]||[],e.domListeners[t][this.selector].push(n),this)},t.prototype.once=function(e,t){var n=this;function r(){return n.off(e,r),t.apply(n,arguments)}return r.fn=t,n.on(e,r),n},t.prototype.off=function(t,n){var r=this,o=[];if(2===arguments.length)s()(e.domListeners[t][r.selector],function(e,t){e!==n&&e.fn!==n&&o.push(e)}),e.domListeners[t][r.selector]=o;else if(1===arguments.length)try{delete e.domListeners[t][r.selector]}catch(n){e.domListeners[t][r.selector]=[]}else s()(e.domListeners,function(t,n){try{delete e.domListeners[n][r.selector]}catch(t){e.domListeners[n][r.selector]=function(){}}});return r},t}(d);c()(d.utils,{cookie:q,deepExtend:h,listener:U,serializeForm:function(e,t){"object"!=typeof t?t={hash:!!t}:void 0===t.hash&&(t.hash=!0);for(var n=t.hash?{}:"",r=t.serializer||(t.hash?P:M),o=e&&e.elements?e.elements:[],i=Object.create(null),s=0;s<o.length;++s){var a=o[s];if(!(t.ignoreTypes&&t.ignoreTypes.indexOf(a.type)>-1)&&(t.disabled||!a.disabled)&&a.name&&L.test(a.nodeName)&&!D.test(a.type)){var c=a.name,u=a.value;if("checkbox"!==a.type&&"radio"!==a.type||a.checked||(u=void 0),t.empty){if("checkbox"!==a.type||a.checked||(u=""),"radio"===a.type&&(i[a.name]||a.checked?a.checked&&(i[a.name]=!0):i[a.name]=!1),void 0==u&&"radio"==a.type)continue}else if(!u)continue;if("select-multiple"!==a.type)n=r(n,c,u);else{u=[];for(var l=a.options,d=!1,f=0;f<l.length;++f){var p=l[f],h=t.empty&&!p.value,m=p.value||h;p.selected&&m&&(d=!0,n=t.hash&&"[]"!==c.slice(c.length-2)?r(n,c+"[]",p.value):r(n,c,p.value))}!d&&t.empty&&(n=r(n,c,""))}}}if(t.empty)for(var c in i)i[c]||(n=r(n,c,""));return n},timer:K}),d.listenTo=function(e){s()(e,function(e,t){var n=t.split(" "),r=n[0],o=n.slice(1,n.length).join(" ");return U(o).on(r,e)})},Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for((n=n<0?Math.ceil(n):Math.floor(n))<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1});const J=d.extendLibrary(d);t.default=J},function(e,t,n){var r=n(0);n(1);e.exports=function(e){var t=[];return r(e,function(e,n){"string"!=typeof e&&(e=JSON.stringify(e)),t.push(n+"="+encodeURIComponent(e))}),t.join("&")}},function(e,t){e.exports=function(e){var t,n={},r=/\+/g,o=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(r," "))},s=e.split("?")[1];for(;t=o.exec(s);)n[i(t[1])]=i(t[2]);return n}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){e.exports=n(7)}])});
//# sourceMappingURL=keen-tracking.min.js.map